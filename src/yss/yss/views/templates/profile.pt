<div metal:use-macro="main_template">

  <div metal:fill-slot="main_content">

    <div class="col-md-12">
      <div class="panel panel-default">
        <tal:if tal:condition="not form">
         <div class="panel-heading">
           <p style="float: right"><a href="edit.html">Edit</a></p>
           <p>Profile Information</p>
         </div>
         <div class="panel-body">
           <img align="right" src="${photo_url}" />
           <h1>${title}</h1>

           <p tal:condition="email">
              E-mail: <a href="mailto:${email}">${email}</a></p>

           <p tal:condition="age">Age: ${age}</p>

           <p tal:condition="sex">Sex: ${sex}</p>

           <p tal:condition="genre">
            Favorite Genre: ${genre}</p>

         </div>
         <div class="panel-heading">
          Recent Recordings
         </div>
         <div class="panel-body">
           <table tal:condition="recent_recordings|None" 
                  class="table table-striped table-condensed">

             <thead>
               <tr>
                 <th width="25%">
                   Original Artist
                 </th>
                 <th width="25%">
                   Title
                 </th>
                 <th width="20%">
                   Genre
                 </th>
                 <th width="15%">
                   Likes
                 </th>
                 <th width="20%">
                   Recorded
                 </th>
               </tr>
             </thead>
             
             <tbody>
               <tr tal:repeat="item recent_recordings">
                 <td>${item.song.artist}</td>
                 <td>
                  <a href="${request.resource_url(item)}">${item.song.title}</a>
                 </td>
                 <td>${item.song.genre or 'Unknown'}</td>
                 <td>${item.likes}</td>
                 <td>${item.created.isoformat()}</td>
               </tr>
             </tbody>
           </table>
           <div style="padding-top: 10px;"
                tal:condition="not recent_recordings">
             No recordings found.
           </div>
         </div>
        </tal:if>
        <tal:if tal:condition="form">
         <div class="panel-heading">
           Account settings
         </div>
         <div class="panel-body">
           ${structure:form}
         </div>
        </tal:if>
      </div>

    </div>
  </div>
</div>
